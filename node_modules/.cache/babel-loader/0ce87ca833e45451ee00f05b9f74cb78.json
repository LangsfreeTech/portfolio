{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Satyam/Desktop/langs/LangsFree-project/Satyam/langsfree/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Satyam/Desktop/langs/LangsFree-project/Satyam/langsfree/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/Satyam/Desktop/langs/LangsFree-project/Satyam/langsfree/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:/Users/Satyam/Desktop/langs/LangsFree-project/Satyam/langsfree/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Satyam/Desktop/langs/LangsFree-project/Satyam/langsfree/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState}from'react';import'../Form.css';import axios from'axios';var restUrl=\"http://localhost/moglie-api/\";var Login=function Login(){var _useState=useState({isLoginOpen:false}),_useState2=_slicedToArray(_useState,2),home=_useState2[0],setHome=_useState2[1];var _useState3=useState({error:[]}),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState({email:\"\",password:\"\"}),_useState6=_slicedToArray(_useState5,2),users=_useState6[0],setUsers=_useState6[1];var showValidationErr=function showValidationErr(elm,msg){setError(function(prevState){return{error:[].concat(_toConsumableArray(prevState.error),[{elm:elm,msg:msg}])};});};var onEmailChange=function onEmailChange(e){setUsers(_objectSpread(_objectSpread({},users),{},{email:e.target.value}));// clearValidationErr(\"email\");\n};var onPasswordChange=function onPasswordChange(e){setUsers(_objectSpread(_objectSpread({},users),{},{password:e.target.value}));// clearValidationErr(\"password\");\n};var submitLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var postData,axiosConfig;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(users.email===\"\"){showValidationErr(\"email\",\"Email cannot be empty\");}if(users.password===\"\"){showValidationErr(\"password\",\"Password cannot be empty\");}if(!(users.email!==\"\"&&users.password!==\"\")){_context.next=9;break;}postData={\"name\":\"generateToken\",\"param\":{\"email\":users.email,\"pass\":users.password}};axiosConfig={headers:{'Content-Type':'application/json',\"Access-Control-Allow-Origin\":\"*\"}};_context.next=7;return axios.post(restUrl,postData,axiosConfig).then(function(response){return setUsers(response.data);});case 7:_context.next=9;return axios.post(restUrl,postData,axiosConfig).then(function(response){return(// console.log(response.data.success.token) \nlocalStorage.setItem(\"auth\",JSON.stringify(response.data.success.token)));});case 9:case\"end\":return _context.stop();}}},_callee);}));return function submitLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"inner-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",className:\"login-input\",placeholder:\"Username\",onChange:onEmailChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"login-input\",placeholder:\"Password\",onChange:onPasswordChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"login-btn\",onClick:submitLogin,children:\" Login\"}),/*#__PURE__*/_jsx(\"small\",{className:\"danger-error\",children:home.isLoginOpen&&/*#__PURE__*/_jsx(\"p\",{children:\"login\"})})]}),/*#__PURE__*/_jsx(\"small\",{className:\"danger-error\",children:\"Forget Password\"})]});};export default Login;","map":{"version":3,"sources":["C:/Users/Satyam/Desktop/langs/LangsFree-project/satyam/langsfree/src/components/Login.js"],"names":["React","useState","axios","restUrl","Login","isLoginOpen","home","setHome","error","setError","email","password","users","setUsers","showValidationErr","elm","msg","prevState","onEmailChange","e","target","value","onPasswordChange","submitLogin","postData","axiosConfig","headers","post","then","response","data","localStorage","setItem","JSON","stringify","success","token"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport '../Form.css';\r\nimport axios from 'axios';\r\n\r\n\r\nconst restUrl = \"http://localhost/moglie-api/\";\r\n\r\nconst Login = () => {\r\n    const [home, setHome] = useState({ isLoginOpen: false });\r\n    const [error, setError] = useState({ error: [] });\r\n    const [users, setUsers] = useState({ email: \"\", password: \"\" })\r\n\r\n    const showValidationErr = (elm, msg) => {\r\n        setError((prevState) => ({ error: [...prevState.error, { elm, msg }] }))\r\n    }\r\n\r\n    const onEmailChange = (e) => {\r\n        setUsers({ ...users, email: e.target.value })\r\n        // clearValidationErr(\"email\");\r\n    }\r\n    const onPasswordChange = (e) => {\r\n        setUsers({ ...users, password: e.target.value })\r\n        // clearValidationErr(\"password\");\r\n    }\r\n\r\n    const submitLogin = async (e) => {\r\n        if (users.email === \"\") {\r\n            showValidationErr(\"email\", \"Email cannot be empty\")\r\n        } if (users.password === \"\") {\r\n            showValidationErr(\"password\", \"Password cannot be empty\")\r\n        }\r\n\r\n        if (users.email !== \"\" && users.password !== \"\") {\r\n\r\n            var postData = {\r\n                \"name\": \"generateToken\",\r\n                \"param\": {\r\n                    \"email\": users.email,\r\n                    \"pass\": users.password\r\n                }\r\n            };\r\n\r\n            let axiosConfig = {\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    \"Access-Control-Allow-Origin\": \"*\",\r\n                }\r\n            };\r\n            await axios.post(restUrl, postData, axiosConfig)\r\n                .then(response => setUsers(response.data))\r\n\r\n            await axios.post(restUrl, postData, axiosConfig)\r\n                .then(response =>\r\n                    // console.log(response.data.success.token) \r\n                    localStorage.setItem(\"auth\", JSON.stringify(response.data.success.token))\r\n                )\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"inner-container\">\r\n            <div className=\"header\">\r\n                Login\r\n            </div>\r\n            <div className=\"box\">\r\n\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"username\">Username</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        name=\"email\"\r\n                        className=\"login-input\"\r\n                        placeholder=\"Username\"\r\n                        onChange={onEmailChange}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"password\">Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        name=\"password\"\r\n                        className=\"login-input\"\r\n                        placeholder=\"Password\"\r\n                        onChange={onPasswordChange}\r\n                    />\r\n                </div>\r\n\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"login-btn\"\r\n                    onClick={submitLogin\r\n                    }> Login\r\n                </button>\r\n                <small className=\"danger-error\">{home.isLoginOpen && <p>login</p>}</small>\r\n\r\n\r\n            </div>\r\n            <small className=\"danger-error\">Forget Password</small>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}